<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>hakogazou - ボードゲーム箱ジェネレーター</title>
    <!-- Use Inter and Noto Sans JP for a premium feel matching the design -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header">
        <h1>Box Generator</h1>
        <div style="font-size: 0.8em; color: #888;">Modern UI v2</div>
    </div>

    <div class="container">
        <div class="sidebar">
            <div class="section">
                <div class="section-title">Upload</div>
                <!-- Bulk Upload Area -->
                <div class="upload-area" id="bulk-upload-box">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="1.5">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"/>
                    </svg>
                    <div class="upload-area-text">Drop files or click</div>
                    <div class="upload-area-text" style="font-size: 0.7em; color: #aaa;">filename: front, back, top, etc.</div>
                    <input type="file" id="bulk-upload" class="hidden-input" accept="image/*" multiple>
                </div>
            </div>

            <div class="section">
                <div class="section-title">Faces</div>
                <div class="image-grid">
                    <div class="image-item" id="front-box">
                        <div class="image-label">Front</div>
                        <input type="file" id="front" class="hidden-input" accept="image/*">
                    </div>
                    <div class="image-item" id="back-box">
                        <div class="image-label">Back</div>
                        <input type="file" id="back" class="hidden-input" accept="image/*">
                    </div>
                    <div class="image-item" id="right-box">
                        <div class="image-label">Right</div>
                        <input type="file" id="right" class="hidden-input" accept="image/*">
                    </div>
                    <div class="image-item" id="left-box">
                        <div class="image-label">Left</div>
                        <input type="file" id="left" class="hidden-input" accept="image/*">
                    </div>
                    <div class="image-item" id="top-box">
                        <div class="image-label">Top</div>
                        <input type="file" id="top" class="hidden-input" accept="image/*">
                    </div>
                    <div class="image-item" id="bottom-box">
                        <div class="image-label">Bottom</div>
                        <input type="file" id="bottom" class="hidden-input" accept="image/*">
                    </div>
                    <div class="image-item" id="bg-box">
                        <div class="image-label">BG</div>
                        <input type="file" id="bg" class="hidden-input" accept="image/*">
                    </div>
                </div>
                <button id="reset-bg" class="btn-primary" style="margin-top: 12px; background: #e5e5e5; color: #333;">Reset BG</button>
            </div>

            <div class="section">
                <div class="section-title">Display</div>
                <div class="toggle-row">
                    <div class="toggle-label">Shadow</div>
                    <div class="toggle-wrapper">
                        <input type="checkbox" id="shadowToggle" class="toggle-checkbox" checked>
                        <label for="shadowToggle" class="toggle-track"></label>
                    </div>
                </div>
                <div class="toggle-row">
                    <div class="toggle-label">Auto rotate</div>
                    <div class="toggle-wrapper">
                        <input type="checkbox" id="rotateToggle" class="toggle-checkbox" checked>
                        <label for="rotateToggle" class="toggle-track"></label>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="control-row">
                    <div class="control-label">
                        <span>Orientation</span>
                    </div>
                    <select id="boxOrientation">
                        <option value="stand">Standing</option>
                        <option value="lay">Laying</option>
                    </select>
                </div>

                <div class="control-row" id="layFaceGroup" style="display:none;">
                    <div class="control-label">
                        <span>Laying Face</span>
                    </div>
                    <select id="layFace">
                        <option value="front">Front Up</option>
                        <option value="back">Back Up</option>
                    </select>
                </div>

                <div class="control-row">
                    <div class="control-label">
                        <span>Speed</span>
                        <!-- <span class="control-value">50%</span> -->
                    </div>
                    <input type="range" id="rotateSpeed" min="0.001" max="0.02" step="0.001" value="0.005">
                </div>
            </div>

            <div class="section">
                <div class="section-title">Camera</div>
                <div class="control-row">
                    <div class="control-label">
                        <span>X Rotation</span>
                        <span id="cameraXValue" class="control-value">20°</span>
                    </div>
                    <input type="range" id="cameraX" min="-89" max="89" value="20">
                </div>
                <div class="control-row">
                    <div class="control-label">
                        <span>Y Rotation</span>
                        <span id="cameraYValue" class="control-value">45°</span>
                    </div>
                    <input type="range" id="cameraY" min="-180" max="180" value="45">
                </div>
                <div class="control-row">
                    <div class="control-label">
                        <span>Distance</span>
                        <span id="cameraDistanceValue" class="control-value">2.2</span>
                    </div>
                    <input type="range" id="cameraDistance" min="1.2" max="10" value="2.2" step="0.1">
                </div>
            </div>

            <div class="section">
               <div id="status" class="status hidden"></div>
            </div>

            <!-- Download button moved to sidebar due to layout change or keep in toolbar? Design says sidebar has Export PNG -->
            <!-- But main logic might expect it. Let's add it here as well or map the toolbar button to it -->
        </div>

        <div class="preview-area">
            <div id="canvas-container" class="canvas-container"></div>
            
            <div class="toolbar">
                <button class="tool-btn" id="resetViewBtn" data-tooltip="視点リセット">
                    <!-- Eye/Reset Icon -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                </button>
                <button class="tool-btn" id="reset" data-tooltip="全リセット">
                    <!-- Refresh Icon -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M23 4v6h-6M1 20v-6h6"/>
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                    </svg>
                </button>
                <button class="tool-btn" id="download" data-tooltip="画像を保存">
                    <!-- Download Icon -->
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast hidden"></div>

    <script type="module" src="main.js"></script>
</body>
</html>