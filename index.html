<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <title>hakogazou - ボードゲーム箱ジェネレーター</title>
</head>
<body>
  <header>
    <div class="container">
      <h1>ボードゲーム箱ジェネレーター</h1>
    </div>
  </header>

  <div class="container">
    <div class="grid">
      <div class="card">
        <h2>箱の画像をアップロード</h2>
        
        <!-- 一括アップロード領域 -->
        <div class="bulk-upload-section">
          <h3>一括アップロード</h3>
          <p class="help-text">
          ファイル名に「front」「back」「top」「bottom」「right」「left」「bg」が含まれている画像は自動的に適切な位置に配置されます。</p>
        
          <div class="bulk-upload-box" id="bulk-upload-box">
            <input type="file" id="bulk-upload" accept="image/*" multiple>
            <div class="upload-icon" style="font-size: 2rem;">📂</div>
            <div class="upload-text">複数の画像をここにドラッグ＆ドロップ</div>
          </div>
        </div>
        
        <div class="divider">または</div>
        
        <h3>個別にアップロード</h3>
        <div class="upload-area">
          <div class="upload-item">
            <span class="upload-label">正面 
              <div class="tooltip">?
                <span class="tooltip-text">箱の前面の画像をアップロードしてください</span>
              </div>
            </span>
            <div class="upload-box" id="front-box">
              <input type="file" id="front" accept="image/*">
              <div class="upload-icon">📷</div>
              <div class="upload-text">クリックまたはドロップ</div>
            </div>
          </div>
          <div class="upload-item">
            <span class="upload-label">裏面</span>
            <div class="upload-box" id="back-box">
              <input type="file" id="back" accept="image/*">
              <div class="upload-icon">📷</div>
              <div class="upload-text">クリックまたはドロップ</div>
            </div>
          </div>
          <div class="upload-item">
            <span class="upload-label">右側面</span>
            <div class="upload-box" id="right-box">
              <input type="file" id="right" accept="image/*">
              <div class="upload-icon">📷</div>
              <div class="upload-text">クリックまたはドロップ</div>
            </div>
          </div>
          <div class="upload-item">
            <span class="upload-label">左側面</span>
            <div class="upload-box" id="left-box">
              <input type="file" id="left" accept="image/*">
              <div class="upload-icon">📷</div>
              <div class="upload-text">クリックまたはドロップ</div>
            </div>
          </div>
          <div class="upload-item">
            <span class="upload-label">上面</span>
            <div class="upload-box" id="top-box">
              <input type="file" id="top" accept="image/*">
              <div class="upload-icon">📷</div>
              <div class="upload-text">クリックまたはドロップ</div>
            </div>
          </div>
          <div class="upload-item">
            <span class="upload-label">底面</span>
            <div class="upload-box" id="bottom-box">
              <input type="file" id="bottom" accept="image/*">
              <div class="upload-icon">📷</div>
              <div class="upload-text">クリックまたはドロップ</div>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h2>背景設定</h2>
          <div class="upload-item">
            <span class="upload-label">背景画像 (オプション)</span>
            <div class="upload-box" id="bg-box">
              <input type="file" id="bg" accept="image/*">
              <div class="upload-icon">🖼️</div>
              <div class="upload-text">背景画像をアップロード</div>
            </div>
          </div>
          <button id="reset-bg" style="margin-top: 0.5rem;">背景をリセット</button>
        </div>

        <div class="settings-section">
          <h2>表示設定</h2>
          <label for="view" class="upload-label">視点:</label>
          <select id="view">
            <option value="斜め上">斜め上から</option>
            <option value="正面">正面から</option>
            <option value="横">横から</option>
            <option value="上">上から</option>
            <option value="カスタム">カスタム</option>
          </select>

          <div class="checkbox-container">
            <input type="checkbox" id="shadowToggle" checked>
            <label for="shadowToggle">落ち影を表示</label>
          </div>

          <div class="checkbox-container">
            <input type="checkbox" id="rotateToggle" checked>
            <label for="rotateToggle">自動回転</label>
          </div>

          <div class="speed-control">
            <label for="rotateSpeed">回転速度:</label>
            <input type="range" id="rotateSpeed" class="speed-slider" min="0.001" max="0.02" step="0.001" value="0.005">
          </div>
        </div>

        <div id="status" class="status hidden"></div>
      </div>

      <div class="card">
        <h2>3Dプレビュー</h2>
        <div id="canvas-container" class="canvas-container"></div>
        
        <div class="control-group">
          <button id="download">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
              <path fill="none" d="M0 0h24v24H0z"/>
              <path d="M4 19h16v-7h2v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-8h2v7zm9-10v7h-2V9H6l6-6 6 6h-5z" fill="currentColor"/>
            </svg>
            画像を保存
          </button>
          <button id="reset">
            <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
              <path fill="none" d="M0 0h24v24H0z"/>
              <path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm0-2a8 8 0 1 0 0-16 8 8 0 0 0 0 16zm0-9h-3v2h3v3h2v-3h3v-2h-3V8h-2v3z" fill="currentColor"/>
            </svg>
            リセット
          </button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.159.0/build/three.min.js"></script>
  <script src="main.js"></script>

  <div id="toast" class="toast hidden"></div>
</body>
</body>
</html>